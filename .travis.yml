language: cpp
dist: xenial

matrix:
  include:
  - os: linux
    compiler: gcc

    before_install:
      - wget -qO - http://packages.lunarg.com/lunarg-signing-key-pub.asc | sudo apt-key add -
      - sudo wget -qO /etc/apt/sources.list.d/lunarg-vulkan-xenial.list http://packages.lunarg.com/vulkan/lunarg-vulkan-xenial.list
      - sudo apt update
      - sudo apt install vulkan-sdk
  - os: windows
    before_install:
      - curl --silent --show-error --output vulkan-sdk.exe https://sdk.lunarg.com/sdk/download/1.1.106.0/windows/vulkan-sdk.exe?Human=true
      - echo "cmd /min /C \"set __COMPAT_LAYER=RUNASINVOKER && start \" .\vulkan-sdk.exe /S && refreshenv && echo %VULKAN_SDK% && exit" > test.bat
      - ./test.bat
      - export VULKAN_SDK=C:/VulkanSDK/1.1.106.0
      - echo $VULKAN_SDK
      - env

script:
  - mkdir build
  - cd build
  - cmake ..
  - make
